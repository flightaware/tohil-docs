
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tohil Python Functions &#8212; Tohil 4.0 documentation</title><meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pydoctheme.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    
    <script src="../_static/sidebar.js"></script>
    
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Tohil 4.0 documentation"
          href="../_static/opensearch.xml"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="Tohil Tcl Functions" href="tohil_tcl_functions.html" />
    <link rel="prev" title="Introduction" href="intro.html" />
    <link rel="canonical" href="https://docs.python.org/3/reference/tohil_python_functions.html" />
    
      
    

    
    <style>
      @media only screen {
        table.full-width-table {
            width: 100%;
        }
      }
    </style>
<link rel="shortcut icon" type="image/png" href="../_static/tohil.png" />
            <script type="text/javascript" src="../_static/copybutton.js"></script>
            <script type="text/javascript" src="../_static/menu.js"></script> 

  </head>
<body>
<div class="mobile-nav">
    <input type="checkbox" id="menuToggler" class="toggler__input" aria-controls="navigation"
           aria-pressed="false" aria-expanded="false" role="button" aria-label="Menu" />
    <label for="menuToggler" class="toggler__label">
        <span></span>
    </label>
    <nav class="nav-content" role="navigation">
         <a href="https://github.com/flightaware/tohil" class="nav-logo">
             <img src="../_static/tohil.png" alt="Logo"/>
         </a>
        <div class="version_switcher_placeholder"></div>
        <form id="searchbox" role="search" class="search" action="../search.html" method="get">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" class="search-icon">
                <path fill-rule="nonzero"
                        d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 001.48-5.34c-.47-2.78-2.79-5-5.59-5.34a6.505 6.505 0 00-7.27 7.27c.34 2.8 2.56 5.12 5.34 5.59a6.5 6.5 0 005.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" fill="#444"></path>
            </svg>
            <input type="text" name="q" aria-label="Quick search"/>
            <input type="submit" value="Go"/>
        </form>
    </nav>
    <div class="menu-wrapper">
        <nav class="menu" role="navigation" aria-label="main navigation">
            <div class="language_switcher_placeholder"></div>
  <h4>Previous topic</h4>
  <p class="topless"><a href="intro.html"
                        title="previous chapter">Introduction</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="tohil_tcl_functions.html"
                        title="next chapter">Tohil Tcl Functions</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">Report a Bug</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/master/Doc/reference/tohil_python_functions.rst"
            rel="nofollow">Show Source
        </a>
      </li>
    </ul>
  </div>
        </nav>
    </div>
</div>

  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="tohil_tcl_functions.html" title="Tohil Tcl Functions"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="intro.html" title="Introduction"
             accesskey="P">previous</a> |</li>

          <li><img src="../_static/tohil.png" alt="tohil logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://github.com/flightaware/tohil">Tohil</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">4.0 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">The Tohil Library</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Tohil Python Functions</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Quick search" aria-label="Quick search" type="text" name="q" />
          <input type="submit" value="Go" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
                     |
                </li>
            
      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="tohil-python-functions">
<h1>Tohil Python Functions<a class="headerlink" href="#tohil-python-functions" title="Permalink to this headline">¶</a></h1>
<p>Tohil has a number of functions and data types that it provides
when the tohil package has been imported.</p>
<dl class="py function">
<dt id="tohil.call">
<code class="sig-prename descclassname"><span class="pre">tohil.</span></code><code class="sig-name descname"><span class="pre">call</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">*</span> <span class="pre">args</span></em><span class="optional">[</span>, <em class="sig-param"><span class="pre">to=type</span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#tohil.call" title="Permalink to this definition">¶</a></dt>
<dd><p>Invoke a Tcl command while specifying each argument explicitly,
and returns the result.</p>
<p>This way, even if some arguments contain Tcl metacharacters such
as dollar sign, backslash, and square brackets, Tcl will not
evaluate them.</p>
<p>Zero or more arguments can be specified.  If one or more arguments
are specified, the first argument is the command name (could be a proc
or a C function or whatever), and whatever additional positional
arguments are passed as arguments to the command.</p>
<p>If no arguments are specified, that’s legal for Tcl.  The Tcl
interpreter will evaluate an empty string, and an empty result.</p>
<p>The optional <em>to=</em> named parameter can specify a Python data type
to return, such as <em>str</em>, <em>int</em>, <em>float</em>, <em>bool</em>, <em>list</em>, <em>set</em>,
<em>dict</em>, <em>tuple</em>, <em>tohil.tclobj</em>, <em>tohil.tcldict</em>, or a function that takes
one argument and returns a result.</p>
<p>If the evaluation results in a Tcl error and the error is not caught
by inline Tcl code using <em>try</em> or <em>catch</em>, that is to say if an
uncaught Tcl error is received by Tohil from the attempt, Tohil
uses information about the Tcl error to raise a TclError exception
to Python.</p>
</dd></dl>

<dl class="py function">
<dt id="tohil.convert">
<code class="sig-prename descclassname"><span class="pre">tohil.</span></code><code class="sig-name descname"><span class="pre">convert</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">python_object</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tohil.convert" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert some Python object into a Tcl object and then convert
back to a Python object, a tohil.tclobj by default, but it can
be converted to any optional <em>to=</em> destination type or be passed through
a <em>to=</em> function.</p>
</dd></dl>

<dl class="py function">
<dt id="tohil.eval">
<code class="sig-prename descclassname"><span class="pre">tohil.</span></code><code class="sig-name descname"><span class="pre">eval</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">[tcl_code=]code[,</span> <span class="pre">to=type]</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tohil.eval" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a string of valid Tcl code, including at the caller’s discretion
multiple statements separated by semicolons, or multiline blocks,
evaluate <em>tcl_code</em> using the Tcl interpreter, and return its result,
by default as a <em>tohil.tclobj</em> data type.</p>
<p>As with <em>tohil.call</em>, above, if the evaluation results in an uncaught
Tcl error, Tohil will construct and raise a TclError exception to
Python.</p>
</dd></dl>

<dl class="py function">
<dt id="tohil.exists">
<code class="sig-prename descclassname"><span class="pre">tohil.</span></code><code class="sig-name descname"><span class="pre">exists</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">[var=]varString</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tohil.exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if the variable named by varString exists, or False if it
doesn’t.</p>
<p><em>varString</em> can be an element of a Tcl array by using Tcl array notation,
for example ‘airports(KHOU)’, and tohil.exists will return
based on the existence of the specified element in the specified array.</p>
</dd></dl>

<dl class="py function">
<dt id="tohil.expr">
<code class="sig-prename descclassname"><span class="pre">tohil.</span></code><code class="sig-name descname"><span class="pre">expr</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">[expression=]exprString[,</span> <span class="pre">to=type]</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tohil.expr" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluate <em>exprString</em> as a Tcl expression, and returns the result.</p>
<p>The optional <em>to=</em> named parameter can be supplied to specify one of
the supported Python data types or functions.</p>
</dd></dl>

<dl class="py function">
<dt id="tohil.getvar">
<code class="sig-prename descclassname"><span class="pre">tohil.</span></code><code class="sig-name descname"><span class="pre">getvar</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">[var=]varString,</span> <span class="pre">to=tohil.tclobj[,</span> <span class="pre">default=defVal]</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tohil.getvar" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a Tcl variable or array element and return it to the caller.</p>
<p>The variable is accessed from the current Tcl context, which may
be global.</p>
<p>The name of the variable or array element is in <em>varString</em>.</p>
<p><em>varString</em> can include namespace qualifiers to ensure a reference
is global or to explicitly access a variable within a specific namespace.</p>
<p>The optional <em>to=</em> named parameter can be supplied to specify one of
the supported Python data types or functions.</p>
<p>An optional default value can be specified using the <em>default=</em>
named parameter.  If a default value is specified and the
specified variable or array element doesn’t exist in the
Tcl interpreter, the default value will be returned instead.
<em>default=None</em> is a valid default value and is distinct from
not providing a default value.</p>
<p>Note that default values are coerced to the <em>to=</em> data type,
a tohil.tclobj by default.</p>
</dd></dl>

<dl class="py function">
<dt>
<code class="sig-name descname"><span class="pre">tcl</span> <span class="pre">=</span> <span class="pre">tohil.import_tcl()</span></code></dt>
<dd><p>Using Tcl’s introspection capabilities, traverse all Tcl
namespaces, identify all procs and C commands in each one.</p>
<p>Create a hierarchy of TclNamespace objects returning the
top-level namespace object.</p>
<p>For the procs, suss out their arguments andf default values,
and attach to each namespace entrypoints for each proc and
C command so that calling the Tcl procs looks very much
like calling any Python function.</p>
</dd></dl>

<dl class="py function">
<dt id="tohil.incr">
<code class="sig-prename descclassname"><span class="pre">tohil.</span></code><code class="sig-name descname"><span class="pre">incr</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">[var=]varName[,</span> <span class="pre">[incr=]increment]</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tohil.incr" title="Permalink to this definition">¶</a></dt>
<dd><p>Take a Tcl variable name or array element as specified
by the <em>varName</em> string, and attempt to increment it.</p>
<p>The optional increment amount can be specified positionally
or using the <em>incr=</em> keyword.  Its value is <strong>1</strong> by default.
The increment amount can be negative.</p>
<p>If the variable doesn’t exist, it is created and set
to the increment amount.</p>
<p>If the contents of the variable preclude it being used as
an integer, a Python TypeError exception will be thrown.</p>
</dd></dl>

<dl class="py function">
<dt id="tohil.interact">
<code class="sig-prename descclassname"><span class="pre">tohil.</span></code><code class="sig-name descname"><span class="pre">interact</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tohil.interact" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the Tcl interactive command loop on stdin, which hopefully
is a terminal, until the user sends EOF, at which point they’ll
be returned to the Python command line, or whatever the Python
code that called <em>tohil.interact()</em> does next.</p>
</dd></dl>

<dl class="py function">
<dt id="tohil.package_require">
<code class="sig-prename descclassname"><span class="pre">tohil.</span></code><code class="sig-name descname"><span class="pre">package_require</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">packageName[,</span> <span class="pre">[version=]versionID]</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tohil.package_require" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the specified package.  A specific package version
can be specified, either positionally or by name using
the <em>version=</em> parameter.</p>
<p>This is a shortcut for
<code class="docutils literal notranslate"><span class="pre">tohil.eval(f&quot;package</span> <span class="pre">require</span> <span class="pre">{packageName}</span> <span class="pre">{versionID}&quot;)</span></code>.</p>
</dd></dl>

<dl class="py function">
<dt id="tohil.result">
<code class="sig-prename descclassname"><span class="pre">tohil.</span></code><code class="sig-name descname"><span class="pre">result</span></code><span class="sig-paren">(</span><span class="optional">[</span><em class="sig-param"><span class="pre">to=type</span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#tohil.result" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the Tcl interpreter result object.</p>
<p>The Tcl interpreter has a “result object.”  It contains
the result of the last thing the interpreter did.</p>
<p>It’s not something you would likely normally need to access, because
you would have gotten the result by doing something like
<code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">myResult</span> <span class="pre">[myFunction</span> <span class="pre">myArg1</span> <span class="pre">myArg2]</span></code>.</p>
<p>Nonetheless we make it available because it’s been useful for
the Tohil devs to be able to see what’s in there.</p>
</dd></dl>

<dl class="py function">
<dt id="tohil.run">
<code class="sig-prename descclassname"><span class="pre">tohil.</span></code><code class="sig-name descname"><span class="pre">run</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tohil.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform tohil.exec, but redirect stdout emitted while
python is running it into a string and return
the string to run’s caller after the exec has finished.</p>
<p>Python users are often surprised that exec doesn’t return
anything.</p>
</dd></dl>

<dl class="py function">
<dt id="tohil.setvar">
<code class="sig-prename descclassname"><span class="pre">tohil.</span></code><code class="sig-name descname"><span class="pre">setvar</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">[var=]varName[,</span> <span class="pre">[value=]value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tohil.setvar" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a variable or array element referenced by <em>varName</em>
to the value specified by <em>value</em>.</p>
<p>A few errors are possible, such as trying to set an array
element of a scalar variable or set a scalar variable
that is actually an array.</p>
</dd></dl>

<dl class="py function">
<dt id="tohil.source">
<code class="sig-prename descclassname"><span class="pre">tohil.</span></code><code class="sig-name descname"><span class="pre">source</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fileName</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tohil.source" title="Permalink to this definition">¶</a></dt>
<dd><p>Take the contents of the file specified by <em>fileName</em> and
evaluate it using the Tcl interpreter.  The return value
is the value of the last command executed in the script.</p>
<p>This is the equivalent of <code class="docutils literal notranslate"><span class="pre">tohil.call(&quot;source&quot;,</span> <span class="pre">fileName)</span></code>.</p>
</dd></dl>

<dl class="py function">
<dt id="tohil.subst">
<code class="sig-prename descclassname"><span class="pre">tohil.</span></code><code class="sig-name descname"><span class="pre">subst</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">substString</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tohil.subst" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform Tcl backslash, command and variable substiutions,
and return the result of doing that without evaluating it.</p>
<p>This is handy for generating some kind of string while
substituting parts of it with embedded $-substitutions of
Tcl variables and evaluation of Tcl code enclosed in square
brackets.</p>
</dd></dl>

<dl class="py function">
<dt id="tohil.tclvar">
<code class="sig-prename descclassname"><span class="pre">tohil.</span></code><code class="sig-name descname"><span class="pre">tclvar</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tohil.tclvar" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a tclobj object that shadows a Tcl variable or
array element.</p>
<p>Any accesses of the resulting tclobj from Python will
always begin with a (noncopying) access of the Tcl
variable or array element’s contents, and any writing
of the variable from Python (by doing things with the tclobj
such as invoking methods on them, using Python list notation
to update tclobj list elements, etc.</p>
</dd></dl>

<dl class="py function">
<dt id="tohil.unset">
<code class="sig-prename descclassname"><span class="pre">tohil.</span></code><code class="sig-name descname"><span class="pre">unset</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tohil.unset" title="Permalink to this definition">¶</a></dt>
<dd><p><em>tohil.unset</em> is used to unset variables, array elements,
and even entire arrays in the Tcl interpreter.</p>
<p>Zero or more arguments specify names to unset.</p>
<p>Unsetting an array element uses subscript notation, for
example <em>x(e)</em>.</p>
<p>Unsetting an array by name without a subscript will unset
the entire array.</p>
<p>It is not an error to attempt to unset variables, arrays and
array elements that don’t exist.</p>
</dd></dl>

</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="intro.html"
                        title="previous chapter">Introduction</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="tohil_tcl_functions.html"
                        title="next chapter">Tohil Tcl Functions</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">Report a Bug</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/master/Doc/reference/tohil_python_functions.rst"
            rel="nofollow">Show Source
        </a>
      </li>
    </ul>
  </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="tohil_tcl_functions.html" title="Tohil Tcl Functions"
             >next</a> |</li>
        <li class="right" >
          <a href="intro.html" title="Introduction"
             >previous</a> |</li>

          <li><img src="../_static/tohil.png" alt="tohil logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://github.com/flightaware/tohil">Tohil</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">4.0 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" >The Tohil Library</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Tohil Python Functions</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Quick search" aria-label="Quick search" type="text" name="q" />
          <input type="submit" value="Go" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
                     |
                </li>
            
      </ul>
    </div>  
    <div class="footer">
    &copy; <a href="../copyright.html">Copyright</a> 2014, Aidan Hobson Sayers, 2021-2021, FlightAware LLC.
    <br />
    This page is licensed under the Python Software Foundation License Version 2.
    <br />
    Examples, recipes, and other code in the documentation are additionally licensed under the Zero Clause BSD License.
    <br />
    See <a href="">History and License</a> for more information.
    <br /><br />

    The Python Software Foundation is a non-profit corporation.
<a href="https://www.python.org/psf/donations/">Please donate.</a>
<br />
    <br />

    Last updated on Jun 06, 2021.
    <a href="https://docs.python.org/3/bugs.html">Found a bug</a>?
    <br />

    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.5.4.
    </div>

  </body>
</html>