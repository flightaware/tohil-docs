
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>What’s New In Tohil 3.0 &#8212; Tohil 4.0 documentation</title><meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pydoctheme.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    
    <script src="../_static/sidebar.js"></script>
    
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Tohil 4.0 documentation"
          href="../_static/opensearch.xml"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="The Tohil Tutorial" href="../tutorial/index.html" />
    <link rel="prev" title="What’s New In Tohil 3.2" href="3.2.html" />
    <link rel="canonical" href="https://docs.python.org/3/whatsnew/3.0.html" />
    
      
    

    
    <style>
      @media only screen {
        table.full-width-table {
            width: 100%;
        }
      }
    </style>
<link rel="shortcut icon" type="image/png" href="../_static/tohil.png" />
            <script type="text/javascript" src="../_static/copybutton.js"></script>
            <script type="text/javascript" src="../_static/menu.js"></script> 

  </head>
<body>
<div class="mobile-nav">
    <input type="checkbox" id="menuToggler" class="toggler__input" aria-controls="navigation"
           aria-pressed="false" aria-expanded="false" role="button" aria-label="Menu" />
    <label for="menuToggler" class="toggler__label">
        <span></span>
    </label>
    <nav class="nav-content" role="navigation">
         <a href="https://github.com/flightaware/tohil" class="nav-logo">
             <img src="../_static/tohil.png" alt="Logo"/>
         </a>
        <div class="version_switcher_placeholder"></div>
        <form id="searchbox" role="search" class="search" action="../search.html" method="get">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" class="search-icon">
                <path fill-rule="nonzero"
                        d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 001.48-5.34c-.47-2.78-2.79-5-5.59-5.34a6.505 6.505 0 00-7.27 7.27c.34 2.8 2.56 5.12 5.34 5.59a6.5 6.5 0 005.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" fill="#444"></path>
            </svg>
            <input type="text" name="q" aria-label="Quick search"/>
            <input type="submit" value="Go"/>
        </form>
    </nav>
    <div class="menu-wrapper">
        <nav class="menu" role="navigation" aria-label="main navigation">
            <div class="language_switcher_placeholder"></div>
  <h3><a href="../contents.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">What’s New In Tohil 3.0</a><ul>
<li><a class="reference internal" href="#tclprocs">TclProcs</a><ul>
<li><a class="reference internal" href="#tclnamespaces">TclNamespaces</a></li>
<li><a class="reference internal" href="#tclerror-exception-class">TclError Exception Class</a></li>
<li><a class="reference internal" href="#new-helpers-functions">New helpers Functions</a></li>
<li><a class="reference internal" href="#tests">Tests</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="3.2.html"
                        title="previous chapter">What’s New In Tohil 3.2</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../tutorial/index.html"
                        title="next chapter">The Tohil Tutorial</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">Report a Bug</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/master/Doc/whatsnew/3.0.rst"
            rel="nofollow">Show Source
        </a>
      </li>
    </ul>
  </div>
        </nav>
    </div>
</div>

  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../tutorial/index.html" title="The Tohil Tutorial"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="3.2.html" title="What’s New In Tohil 3.2"
             accesskey="P">previous</a> |</li>

          <li><img src="../_static/tohil.png" alt="tohil logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://github.com/flightaware/tohil">Tohil</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">4.0 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">What’s New in Tohil</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">What’s New In Tohil 3.0</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Quick search" aria-label="Quick search" type="text" name="q" />
          <input type="submit" value="Go" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
                     |
                </li>
            
      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="what-s-new-in-tohil-3-0">
<h1>What’s New In Tohil 3.0<a class="headerlink" href="#what-s-new-in-tohil-3-0" title="Permalink to this headline">¶</a></h1>
<p>Welcome to Tohil 3.</p>
<p>Tohil 3 brings forward all the slick stuff from Tohil 2, plus it provides the
means of accessing Tcl functions from Python in such a way that they very much
look and behave like native Python functions.  Not only that, but for Tcl procs
made available to Python by tohil, every parameter can be specified by
position or by name, something few native Python functions or Python C
functions can do.</p>
<div class="section" id="tclprocs">
<h2>TclProcs<a class="headerlink" href="#tclprocs" title="Permalink to this headline">¶</a></h2>
<p>Any Tcl proc or C command can be defined as a Python function simply
by creating a TclProc object and then calling it.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">tohil</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tohil</span><span class="o">.</span><span class="n">package_require</span><span class="p">(</span><span class="s2">&quot;Tclx&quot;</span><span class="p">)</span>
<span class="go">&#39;8.6&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">intersect</span> <span class="o">=</span> <span class="n">tohil</span><span class="o">.</span><span class="n">TclProc</span><span class="p">(</span><span class="s2">&quot;intersect&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">intersect</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">],</span> <span class="n">to</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
<span class="go">[&#39;4&#39;, &#39;5&#39;, &#39;6&#39;]</span>
</pre></div>
</div>
<p>It’s pretty fun to play with them this way from the command line.</p>
<p>While TclProcs are directly callable, as seen above, they are fully
fledged Python object and have a number of interesting and potentially
useful attributes and method, including the Python function name,
Tcl proc name, whether the Tcl function being shadowed is a proc or
not (if not, it’s a command written in C), a Python dictionary
specifying any default arguments and their values, and the proc’s arguments.</p>
<div class="section" id="tclnamespaces">
<h3>TclNamespaces<a class="headerlink" href="#tclnamespaces" title="Permalink to this headline">¶</a></h3>
<p>But wait, there’s more.  tohil.import_namespace(my_namespace) will create
a TclNamespace object and import all the procs and C commands as methods
of that namespace, recursively importing any subordinate namespaces and
their procs and C commands as well.  Namespaces and function calls can
be chained, so you get the hierarchy of Tcl namespaces and procs and
C commands created after loading all of your packages, chainable
from Python.</p>
<p>It’s a convenient way to leverage TclProcs across all of your Tcl procs
and commands.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">tohil</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tohil</span><span class="o">.</span><span class="n">package_require</span><span class="p">(</span><span class="s2">&quot;clock::rfc2822&quot;</span><span class="p">)</span>
<span class="go">&#39;0.1&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tcl</span> <span class="o">=</span> <span class="n">tohil</span><span class="o">.</span><span class="n">import_tcl</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tcl</span><span class="o">.</span><span class="n">clock</span><span class="o">.</span><span class="n">rfc2822</span><span class="o">.</span><span class="n">parse_date</span><span class="p">(</span><span class="s1">&#39;Wed, 14 Apr 2021 12:04:48 -0500&#39;</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
<span class="go">1618419888</span>
</pre></div>
</div>
</div>
<div class="section" id="tclerror-exception-class">
<h3>TclError Exception Class<a class="headerlink" href="#tclerror-exception-class" title="Permalink to this headline">¶</a></h3>
<p>Tohil 3 also adds a sweet TclError exception class, and any Tcl errors that
bubble back all the way to Python without any Tcl code having caught the
error will be thrown in Python as TclError exceptions.  The TclError object
can be examined to find out all the stuff Tcl knows about the error…
the result, the error code, code level, error stack, traceback, and error line.</p>
</div>
<div class="section" id="new-helpers-functions">
<h3>New helpers Functions<a class="headerlink" href="#new-helpers-functions" title="Permalink to this headline">¶</a></h3>
<p>tohil.package_require is real useful.  The others ones tohil needs for itself
and they’re not as useful, but maybe for some people for some purposes.</p>
<ul class="simple">
<li><p>tohil.package_require(package_name, version=version)</p></li>
<li><p>tohil.info_procs() - return a list of procs.  pattern arg optional.</p></li>
<li><p>tohil.info_commands() - return a list of commands, includes procs and C commands.</p></li>
<li><p>tohil.info_body() - return the body of a proc.</p></li>
<li><p>tohil.info_default() - return the default value for an argument of a proc</p></li>
<li><p>tohil.info_args(proc) - return a list of the names of the arguments for a proc</p></li>
<li><p>tohil.namespace_children(namespace) - return a list of all the child namespaces of a namespace</p></li>
</ul>
</div>
<div class="section" id="tests">
<h3>Tests<a class="headerlink" href="#tests" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Dozens of new tests.</p></li>
<li><p>“make test” runs both the Python ones and the Tcl ones</p></li>
</ul>
</div>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../contents.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">What’s New In Tohil 3.0</a><ul>
<li><a class="reference internal" href="#tclprocs">TclProcs</a><ul>
<li><a class="reference internal" href="#tclnamespaces">TclNamespaces</a></li>
<li><a class="reference internal" href="#tclerror-exception-class">TclError Exception Class</a></li>
<li><a class="reference internal" href="#new-helpers-functions">New helpers Functions</a></li>
<li><a class="reference internal" href="#tests">Tests</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="3.2.html"
                        title="previous chapter">What’s New In Tohil 3.2</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../tutorial/index.html"
                        title="next chapter">The Tohil Tutorial</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">Report a Bug</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/master/Doc/whatsnew/3.0.rst"
            rel="nofollow">Show Source
        </a>
      </li>
    </ul>
  </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../tutorial/index.html" title="The Tohil Tutorial"
             >next</a> |</li>
        <li class="right" >
          <a href="3.2.html" title="What’s New In Tohil 3.2"
             >previous</a> |</li>

          <li><img src="../_static/tohil.png" alt="tohil logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://github.com/flightaware/tohil">Tohil</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">4.0 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" >What’s New in Tohil</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">What’s New In Tohil 3.0</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Quick search" aria-label="Quick search" type="text" name="q" />
          <input type="submit" value="Go" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
                     |
                </li>
            
      </ul>
    </div>  
    <div class="footer">
    &copy; <a href="../copyright.html">Copyright</a> 2014, Aidan Hobson Sayers, 2021-2021, FlightAware LLC.
    <br />
    This page is licensed under the Python Software Foundation License Version 2.
    <br />
    Examples, recipes, and other code in the documentation are additionally licensed under the Zero Clause BSD License.
    <br />
    See <a href="">History and License</a> for more information.
    <br /><br />

    The Python Software Foundation is a non-profit corporation.
<a href="https://www.python.org/psf/donations/">Please donate.</a>
<br />
    <br />

    Last updated on Jun 04, 2021.
    <a href="https://docs.python.org/3/bugs.html">Found a bug</a>?
    <br />

    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.5.4.
    </div>

  </body>
</html>